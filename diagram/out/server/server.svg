<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="378px" preserveAspectRatio="none" style="width:1126px;height:378px;background:#FFFFFF;" version="1.1" viewBox="0 0 1126 378" width="1126px" zoomAndPan="magnify"><defs><filter height="300%" id="f1w3sxsnxut5b9" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[5980f093df59889341d315faaa18780a]
cluster BattleHandler--><polygon fill="#FFFFFF" filter="url(#f1w3sxsnxut5b9)" points="862,6,964,6,971,29.6094,1109,29.6094,1109,274,862,274,862,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="862" x2="971" y1="29.6094" y2="29.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="96" x="866" y="22.5332">BattleHandler</text><!--MD5=[15636c1ca4a123c16a2a1a8e90aca7a9]
cluster Model--><polygon fill="#FFFFFF" filter="url(#f1w3sxsnxut5b9)" points="16,34,66,34,73,57.6094,834,57.6094,834,371,16,371,16,34" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="73" y1="57.6094" y2="57.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="44" x="20" y="50.5332">Model</text><!--MD5=[5249e6b4722ed70f5a6173fce4a94532]
class BattleHandler--><rect codeLine="11" fill="#FEFECE" filter="url(#f1w3sxsnxut5b9)" height="215.3438" id="BattleHandler" style="stroke:#A80036;stroke-width:1.5;" width="215" x="878" y="42.5"/><ellipse cx="922.75" cy="58.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M925.5156,54.375 Q925.6719,54.1563 925.8594,54.0469 Q926.0469,53.9375 926.2656,53.9375 Q926.6406,53.9375 926.875,54.2031 Q927.1094,54.4531 927.1094,55.0625 L927.1094,56.5156 Q927.1094,57.125 926.875,57.3906 Q926.6406,57.6563 926.2656,57.6563 Q925.9219,57.6563 925.7188,57.4531 Q925.5156,57.2656 925.4063,56.75 Q925.3594,56.3906 925.1719,56.2031 Q924.8438,55.8281 924.2344,55.6094 Q923.625,55.3906 923,55.3906 Q922.2344,55.3906 921.5938,55.7188 Q920.9688,56.0469 920.4688,56.7969 Q919.9844,57.5469 919.9844,58.5781 L919.9844,59.6719 Q919.9844,60.9063 920.875,61.7344 Q921.7656,62.5469 923.3594,62.5469 Q924.2969,62.5469 924.9531,62.2969 Q925.3438,62.1406 925.7656,61.7031 Q926.0313,61.4375 926.1719,61.3594 Q926.3281,61.2813 926.5313,61.2813 Q926.8594,61.2813 927.1094,61.5469 Q927.375,61.7969 927.375,62.1406 Q927.375,62.4844 927.0313,62.8906 Q926.5313,63.4688 925.7344,63.7969 Q924.6563,64.25 923.3594,64.25 Q921.8438,64.25 920.6406,63.625 Q919.6563,63.125 918.9688,62.0625 Q918.2813,60.9844 918.2813,59.7031 L918.2813,58.5469 Q918.2813,57.2188 918.8906,56.0781 Q919.5156,54.9219 920.6094,54.3125 Q921.7031,53.6875 922.9375,53.6875 Q923.6719,53.6875 924.3125,53.8594 Q924.9688,54.0156 925.5156,54.375 Z " fill="#000000"/><text fill="#000000" font-family="cascadia code" font-size="16" lengthAdjust="spacing" textLength="117" x="943.25" y="64.0469">BattleHandler</text><line style="stroke:#A80036;stroke-width:1.5;" x1="879" x2="1092" y1="74.5" y2="74.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="886" y="82.5"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="105" x="898" y="89.6328">battle : Battle</text><line style="stroke:#A80036;stroke-width:1.5;" x1="879" x2="1092" y1="96.4453" y2="96.4453"/><ellipse cx="889" cy="107.4453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="168" x="898" y="111.5781">updateGameState() : void</text><ellipse cx="889" cy="121.3906" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="175" x="898" y="125.5234">plantTowerHandle() : void</text><ellipse cx="889" cy="135.3359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="189" x="898" y="139.4688">upgradeTowerHandle() : void</text><ellipse cx="889" cy="149.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="189" x="898" y="153.4141">monsterSpawnHandle() : void</text><ellipse cx="889" cy="163.2266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="175" x="898" y="167.3594">towerSpawnHandle() : void</text><ellipse cx="889" cy="177.1719" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="175" x="898" y="181.3047">spellSpawnHandle() : void</text><ellipse cx="889" cy="191.1172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="182" x="898" y="195.25">clientNeedUpgrade() : void</text><ellipse cx="889" cy="205.0625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="182" x="898" y="209.1953">updateGameState1(GameState</text><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="161" x="898" y="223.1406">clientGameState) : void</text><ellipse cx="889" cy="232.9531" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="182" x="898" y="237.0859">updateGameState2(GameState</text><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="161" x="898" y="251.0313">clientGameState) : void</text><!--MD5=[56044dde1eb5c59443a17cac917b404f]
class Battle--><rect codeLine="28" fill="#FEFECE" filter="url(#f1w3sxsnxut5b9)" height="159.5625" id="Battle" style="stroke:#A80036;stroke-width:1.5;" width="229" x="589" y="70"/><ellipse cx="672.25" cy="86" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M675.0156,81.875 Q675.1719,81.6563 675.3594,81.5469 Q675.5469,81.4375 675.7656,81.4375 Q676.1406,81.4375 676.375,81.7031 Q676.6094,81.9531 676.6094,82.5625 L676.6094,84.0156 Q676.6094,84.625 676.375,84.8906 Q676.1406,85.1563 675.7656,85.1563 Q675.4219,85.1563 675.2188,84.9531 Q675.0156,84.7656 674.9063,84.25 Q674.8594,83.8906 674.6719,83.7031 Q674.3438,83.3281 673.7344,83.1094 Q673.125,82.8906 672.5,82.8906 Q671.7344,82.8906 671.0938,83.2188 Q670.4688,83.5469 669.9688,84.2969 Q669.4844,85.0469 669.4844,86.0781 L669.4844,87.1719 Q669.4844,88.4063 670.375,89.2344 Q671.2656,90.0469 672.8594,90.0469 Q673.7969,90.0469 674.4531,89.7969 Q674.8438,89.6406 675.2656,89.2031 Q675.5313,88.9375 675.6719,88.8594 Q675.8281,88.7813 676.0313,88.7813 Q676.3594,88.7813 676.6094,89.0469 Q676.875,89.2969 676.875,89.6406 Q676.875,89.9844 676.5313,90.3906 Q676.0313,90.9688 675.2344,91.2969 Q674.1563,91.75 672.8594,91.75 Q671.3438,91.75 670.1406,91.125 Q669.1563,90.625 668.4688,89.5625 Q667.7813,88.4844 667.7813,87.2031 L667.7813,86.0469 Q667.7813,84.7188 668.3906,83.5781 Q669.0156,82.4219 670.1094,81.8125 Q671.2031,81.1875 672.4375,81.1875 Q673.1719,81.1875 673.8125,81.3594 Q674.4688,81.5156 675.0156,81.875 Z " fill="#000000"/><text fill="#000000" font-family="cascadia code" font-size="16" lengthAdjust="spacing" textLength="54" x="692.75" y="91.5469">Battle</text><line style="stroke:#A80036;stroke-width:1.5;" x1="590" x2="817" y1="102" y2="102"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="597" y="110"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="98" x="609" y="117.1328">battleId : int</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="597" y="123.9453"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="154" x="609" y="131.0781">gameState1 : GameState</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="597" y="137.8906"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="154" x="609" y="145.0234">gameState2 : GameState</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="597" y="151.8359"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="140" x="609" y="158.9688">userInfo1 : UserInfo</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="597" y="165.7813"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="140" x="609" y="172.9141">userInfo2 : UserInfo</text><line style="stroke:#A80036;stroke-width:1.0;" x1="590" x2="817" y1="179.7266" y2="179.7266"/><ellipse cx="600" cy="190.7266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="203" x="609" y="194.8594">checkingNewGameState() : bool</text><ellipse cx="600" cy="204.6719" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="140" x="609" y="208.8047">generateMap() : void</text><ellipse cx="600" cy="218.6172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="168" x="609" y="222.75">isValidGameState() : int</text><!--MD5=[9e94af7e26ddd61f16675ec5a7d7b75f]
class UserInfo--><rect codeLine="40" fill="#FEFECE" filter="url(#f1w3sxsnxut5b9)" height="145.6172" id="UserInfo" style="stroke:#A80036;stroke-width:1.5;" width="257" x="272" y="70"/><ellipse cx="360.25" cy="86" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M363.0156,81.875 Q363.1719,81.6563 363.3594,81.5469 Q363.5469,81.4375 363.7656,81.4375 Q364.1406,81.4375 364.375,81.7031 Q364.6094,81.9531 364.6094,82.5625 L364.6094,84.0156 Q364.6094,84.625 364.375,84.8906 Q364.1406,85.1563 363.7656,85.1563 Q363.4219,85.1563 363.2188,84.9531 Q363.0156,84.7656 362.9063,84.25 Q362.8594,83.8906 362.6719,83.7031 Q362.3438,83.3281 361.7344,83.1094 Q361.125,82.8906 360.5,82.8906 Q359.7344,82.8906 359.0938,83.2188 Q358.4688,83.5469 357.9688,84.2969 Q357.4844,85.0469 357.4844,86.0781 L357.4844,87.1719 Q357.4844,88.4063 358.375,89.2344 Q359.2656,90.0469 360.8594,90.0469 Q361.7969,90.0469 362.4531,89.7969 Q362.8438,89.6406 363.2656,89.2031 Q363.5313,88.9375 363.6719,88.8594 Q363.8281,88.7813 364.0313,88.7813 Q364.3594,88.7813 364.6094,89.0469 Q364.875,89.2969 364.875,89.6406 Q364.875,89.9844 364.5313,90.3906 Q364.0313,90.9688 363.2344,91.2969 Q362.1563,91.75 360.8594,91.75 Q359.3438,91.75 358.1406,91.125 Q357.1563,90.625 356.4688,89.5625 Q355.7813,88.4844 355.7813,87.2031 L355.7813,86.0469 Q355.7813,84.7188 356.3906,83.5781 Q357.0156,82.4219 358.1094,81.8125 Q359.2031,81.1875 360.4375,81.1875 Q361.1719,81.1875 361.8125,81.3594 Q362.4688,81.5156 363.0156,81.875 Z " fill="#000000"/><text fill="#000000" font-family="cascadia code" font-size="16" lengthAdjust="spacing" textLength="72" x="380.75" y="91.5469">UserInfo</text><line style="stroke:#A80036;stroke-width:1.5;" x1="273" x2="528" y1="102" y2="102"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="280" y="110"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="98" x="292" y="117.1328">email : String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="280" y="123.9453"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="91" x="292" y="131.0781">name : String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="280" y="137.8906"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="140" x="292" y="145.0234">displayName : String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="280" y="151.8359"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="119" x="292" y="158.9688">password : String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="280" y="165.7813"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="231" x="292" y="172.9141">resourceProfile : ResourceProfile</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="280" y="179.7266"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="203" x="292" y="186.8594">battleProfile : BattleProfile</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="280" y="193.6719"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="154" x="292" y="200.8047">treasure :  Treasure[]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="273" x2="528" y1="207.6172" y2="207.6172"/><!--MD5=[957ddf93f71061be3b9190fed1e8b063]
class Treasure--><rect codeLine="50" fill="#FEFECE" filter="url(#f1w3sxsnxut5b9)" height="103.7813" id="Treasure" style="stroke:#A80036;stroke-width:1.5;" width="180" x="32" y="91"/><ellipse cx="81.75" cy="107" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M84.5156,102.875 Q84.6719,102.6563 84.8594,102.5469 Q85.0469,102.4375 85.2656,102.4375 Q85.6406,102.4375 85.875,102.7031 Q86.1094,102.9531 86.1094,103.5625 L86.1094,105.0156 Q86.1094,105.625 85.875,105.8906 Q85.6406,106.1563 85.2656,106.1563 Q84.9219,106.1563 84.7188,105.9531 Q84.5156,105.7656 84.4063,105.25 Q84.3594,104.8906 84.1719,104.7031 Q83.8438,104.3281 83.2344,104.1094 Q82.625,103.8906 82,103.8906 Q81.2344,103.8906 80.5938,104.2188 Q79.9688,104.5469 79.4688,105.2969 Q78.9844,106.0469 78.9844,107.0781 L78.9844,108.1719 Q78.9844,109.4063 79.875,110.2344 Q80.7656,111.0469 82.3594,111.0469 Q83.2969,111.0469 83.9531,110.7969 Q84.3438,110.6406 84.7656,110.2031 Q85.0313,109.9375 85.1719,109.8594 Q85.3281,109.7813 85.5313,109.7813 Q85.8594,109.7813 86.1094,110.0469 Q86.375,110.2969 86.375,110.6406 Q86.375,110.9844 86.0313,111.3906 Q85.5313,111.9688 84.7344,112.2969 Q83.6563,112.75 82.3594,112.75 Q80.8438,112.75 79.6406,112.125 Q78.6563,111.625 77.9688,110.5625 Q77.2813,109.4844 77.2813,108.2031 L77.2813,107.0469 Q77.2813,105.7188 77.8906,104.5781 Q78.5156,103.4219 79.6094,102.8125 Q80.7031,102.1875 81.9375,102.1875 Q82.6719,102.1875 83.3125,102.3594 Q83.9688,102.5156 84.5156,102.875 Z " fill="#000000"/><text fill="#000000" font-family="cascadia code" font-size="16" lengthAdjust="spacing" textLength="72" x="102.25" y="112.5469">Treasure</text><line style="stroke:#A80036;stroke-width:1.5;" x1="33" x2="211" y1="123" y2="123"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="40" y="131"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="133" x="52" y="138.1328">type : TreasureType</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="40" y="144.9453"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="98" x="52" y="152.0781">items : Item[]</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="40" y="158.8906"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="154" x="52" y="166.0234">remainingTime : double</text><line style="stroke:#A80036;stroke-width:1.5;" x1="33" x2="211" y1="172.8359" y2="172.8359"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="40" y="180.8359"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="42" x="52" y="187.9688">open()</text><!--MD5=[c87f6d784da642e281f8f9c9b845355b]
class ResourceProfile--><rect codeLine="57" fill="#FEFECE" filter="url(#f1w3sxsnxut5b9)" height="103.7813" id="ResourceProfile" style="stroke:#A80036;stroke-width:1.5;" width="167" x="317" y="251"/><ellipse cx="332" cy="267" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M334.7656,262.875 Q334.9219,262.6563 335.1094,262.5469 Q335.2969,262.4375 335.5156,262.4375 Q335.8906,262.4375 336.125,262.7031 Q336.3594,262.9531 336.3594,263.5625 L336.3594,265.0156 Q336.3594,265.625 336.125,265.8906 Q335.8906,266.1563 335.5156,266.1563 Q335.1719,266.1563 334.9688,265.9531 Q334.7656,265.7656 334.6563,265.25 Q334.6094,264.8906 334.4219,264.7031 Q334.0938,264.3281 333.4844,264.1094 Q332.875,263.8906 332.25,263.8906 Q331.4844,263.8906 330.8438,264.2188 Q330.2188,264.5469 329.7188,265.2969 Q329.2344,266.0469 329.2344,267.0781 L329.2344,268.1719 Q329.2344,269.4063 330.125,270.2344 Q331.0156,271.0469 332.6094,271.0469 Q333.5469,271.0469 334.2031,270.7969 Q334.5938,270.6406 335.0156,270.2031 Q335.2813,269.9375 335.4219,269.8594 Q335.5781,269.7813 335.7813,269.7813 Q336.1094,269.7813 336.3594,270.0469 Q336.625,270.2969 336.625,270.6406 Q336.625,270.9844 336.2813,271.3906 Q335.7813,271.9688 334.9844,272.2969 Q333.9063,272.75 332.6094,272.75 Q331.0938,272.75 329.8906,272.125 Q328.9063,271.625 328.2188,270.5625 Q327.5313,269.4844 327.5313,268.2031 L327.5313,267.0469 Q327.5313,265.7188 328.1406,264.5781 Q328.7656,263.4219 329.8594,262.8125 Q330.9531,262.1875 332.1875,262.1875 Q332.9219,262.1875 333.5625,262.3594 Q334.2188,262.5156 334.7656,262.875 Z " fill="#000000"/><text fill="#000000" font-family="cascadia code" font-size="16" lengthAdjust="spacing" textLength="135" x="346" y="272.5469">ResourceProfile</text><line style="stroke:#A80036;stroke-width:1.5;" x1="318" x2="483" y1="283" y2="283"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="325" y="291"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="140" x="337" y="298.1328">activeCard :  Card[]</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="325" y="304.9453"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="63" x="337" y="312.0781">gem : int</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="325" y="318.8906"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="70" x="337" y="326.0234">coin : int</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="325" y="332.8359"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="77" x="337" y="339.9688">frame : int</text><line style="stroke:#A80036;stroke-width:1.5;" x1="318" x2="483" y1="346.7813" y2="346.7813"/><!--MD5=[5e305716458bbdabbd2d7f572ed2bae2]
class Card--><rect codeLine="64" fill="#FEFECE" filter="url(#f1w3sxsnxut5b9)" height="89.8359" id="Card" style="stroke:#A80036;stroke-width:1.5;" width="131" x="56.5" y="258"/><ellipse cx="99.85" cy="274" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M102.6156,269.875 Q102.7719,269.6563 102.9594,269.5469 Q103.1469,269.4375 103.3656,269.4375 Q103.7406,269.4375 103.975,269.7031 Q104.2094,269.9531 104.2094,270.5625 L104.2094,272.0156 Q104.2094,272.625 103.975,272.8906 Q103.7406,273.1563 103.3656,273.1563 Q103.0219,273.1563 102.8188,272.9531 Q102.6156,272.7656 102.5063,272.25 Q102.4594,271.8906 102.2719,271.7031 Q101.9438,271.3281 101.3344,271.1094 Q100.725,270.8906 100.1,270.8906 Q99.3344,270.8906 98.6938,271.2188 Q98.0688,271.5469 97.5688,272.2969 Q97.0844,273.0469 97.0844,274.0781 L97.0844,275.1719 Q97.0844,276.4063 97.975,277.2344 Q98.8656,278.0469 100.4594,278.0469 Q101.3969,278.0469 102.0531,277.7969 Q102.4438,277.6406 102.8656,277.2031 Q103.1313,276.9375 103.2719,276.8594 Q103.4281,276.7813 103.6313,276.7813 Q103.9594,276.7813 104.2094,277.0469 Q104.475,277.2969 104.475,277.6406 Q104.475,277.9844 104.1313,278.3906 Q103.6313,278.9688 102.8344,279.2969 Q101.7563,279.75 100.4594,279.75 Q98.9438,279.75 97.7406,279.125 Q96.7563,278.625 96.0688,277.5625 Q95.3813,276.4844 95.3813,275.2031 L95.3813,274.0469 Q95.3813,272.7188 95.9906,271.5781 Q96.6156,270.4219 97.7094,269.8125 Q98.8031,269.1875 100.0375,269.1875 Q100.7719,269.1875 101.4125,269.3594 Q102.0688,269.5156 102.6156,269.875 Z " fill="#000000"/><text fill="#000000" font-family="cascadia code" font-size="16" lengthAdjust="spacing" textLength="36" x="120.15" y="279.5469">Card</text><line style="stroke:#A80036;stroke-width:1.5;" x1="57.5" x2="186.5" y1="290" y2="290"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="64.5" y="298"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="105" x="76.5" y="305.1328">isActive : bool</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="64.5" y="311.9453"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="84" x="76.5" y="319.0781">level : bool</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="64.5" y="325.8906"/><text fill="#000000" font-family="cascadia code" font-size="12" lengthAdjust="spacing" textLength="84" x="76.5" y="333.0234">pieces : int</text><line style="stroke:#A80036;stroke-width:1.5;" x1="57.5" x2="186.5" y1="339.8359" y2="339.8359"/><!--MD5=[8be96a4a4dc303e5bdf73ea66b5dd041]
link Card to ResourceProfile--><path codeLine="69" d="M187.83,303 C222.38,303 265.56,303 303.9,303 " fill="none" id="Card-to-ResourceProfile" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="316.96,303,310.96,299,304.96,303,310.96,307,316.96,303" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="195.413" y="317.3983">n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="301.936" y="317.2589">1</text><!--MD5=[11202c3a56f6259744b432a58185ccf2]
link Treasure to UserInfo--><path codeLine="70" d="M212.01,143 C226.93,143 242.74,143 258.59,143 " fill="none" id="Treasure-to-UserInfo" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="271.89,143,265.89,139,259.89,143,265.89,147,271.89,143" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="220.046" y="157.2071">n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="256.8395" y="157.005">1</text><!--MD5=[52ce9cf6e02f0b9845e69fdfa880ee0a]
link UserInfo to Battle--><path codeLine="71" d="M529.15,145.97 C544.52,146.33 560.21,146.69 575.57,147.05 " fill="none" id="UserInfo-to-Battle" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="588.96,147.36,583.0539,143.2226,576.9632,147.0832,582.8693,151.2205,588.96,147.36" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="537.2029" y="160.156">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="574.0292" y="161.2417">1</text><!--MD5=[7860c77b3dc6a8b9fb3280510e47604e]
link Battle to BattleHandler--><path codeLine="73" d="M818.39,150 C833.61,150 849.26,150 864.58,150 " fill="none" id="Battle-to-BattleHandler" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="877.95,150,871.95,146,865.95,150,871.95,154,877.95,150" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[c0b711b7eb5ee5f87b743170a28248f6]
@startuml

skinparam wrapwidth 300
skinparam classfontname cascadia code
skinparam classfontsize 16
skinparam classattributefontname cascadia code
skinparam classattributefontsize 12
left to right direction


package BattleHandler {
    class BattleHandler {
        - battle : Battle
        + updateGameState() : void
        + plantTowerHandle() : void
        + upgradeTowerHandle() : void
        + monsterSpawnHandle() : void
        + towerSpawnHandle() : void
        + spellSpawnHandle() : void
        + clientNeedUpgrade() : void
        + updateGameState1(GameState clientGameState) : void
        + updateGameState2(GameState clientGameState) : void
    }
}


package Model {

    class Battle {
        - battleId : int
        - gameState1 : GameState
        - gameState2 : GameState
        - userInfo1 : UserInfo
        - userInfo2 : UserInfo
        - - -
        + checkingNewGameState() : bool
        + generateMap() : void
        + isValidGameState() : int
    }

    class UserInfo {
        - email : String
        - name : String
        - displayName : String
        - password : String
        - resourceProfile : ResourceProfile
        - battleProfile : BattleProfile
        - treasure :  Treasure[]
    }

    class Treasure {
        - type : TreasureType
        - items : Item[]
        - remainingTime : double
        - open()
    }

    class ResourceProfile {
        - activeCard :  Card[]
        - gem : int
        - coin : int
        - frame : int
    }

    class Card {
        - isActive : bool
        - level : bool
        - pieces : int
    }
    Card "n" - -* "1" ResourceProfile
    Treasure "n" - -* "1" UserInfo
    UserInfo "2" - -* "1" Battle
}
Battle - -* BattleHandler

@enduml

PlantUML version 1.2022.0(Tue Jan 11 08:16:42 PST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>